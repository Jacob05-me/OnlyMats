<!DOCTYPE html>
<html>
<title>Only Mat's (18+)</title>
<head>
    <link rel="stylesheet" href="/Ref/Styles/style.css">
    <link rel="stylesheet" href="/Ref/Styles/BlogStyle.css">
    <link rel="script" href="/Ref/Js/Blog.js">
    <script>
        onload = function loadPastComments() {
            console.log("loadPastComments running")
            fetch('/Ref/json/Comments.json')
                .then(res => res.json())
                .then(data => {
                    console.log("data:");
                    console.log(data);
                    jsonComments = data;
                    const targetElement = document.getElementById("comments-list");
                    console.log(jsonComments.Comments.length)
                    for(var i=0; i<jsonComments.Comments.length; i++){
                        let replys = ''
                        for(var j=0; j<jsonComments.Comments[i].Replys.length; j++){
                            var User = jsonComments.Comments[i].Replys[j].User;
                            var Timecode = jsonComments.Comments[i].Replys[j].Timecode;
                            var Text = jsonComments.Comments[i].Replys[j].Text;
                            var ID = jsonComments.Comments[i].Replys[j].ID;
                            replys = replys + '<br><div id="MainCommentContainer"><div id="commentContainer"><div id="CommentInfoContainer"><div id="CommentName">'+User+'</div><div id="CommentTime">'+Timecode+'</div></div><br><hr><div id="CommentContentContainer"><div id="CommentContents">'+Text+'</div></div><div id="CommentIDContainer"><div id="CommentID">ID : '+ID+'</div></div><hr></div></div>'
                        }
                        var User = jsonComments.Comments[i].User;
                        var Timecode = jsonComments.Comments[i].Timecode;
                        var Text = jsonComments.Comments[i].Text;
                        var ID = jsonComments.Comments[i].ID;
                        let Display = '<div id="MainCommentContainer"><div id="commentContainer"><div id="CommentInfoContainer"><div id="CommentName">'+User+'</div><div id="CommentTime">'+Timecode+'</div></div><br><hr><div id="CommentContentContainer"><div id="CommentContents">'+Text+'</div></div><div id="CommentIDContainer"><div id="CommentID">ID : '+ID+'</div></div><hr><div id="CommentReplyButtonContainer"><form id="reply-form"><div>Reply?</div><label for="reply-author">Name:</label><input type="text" id="reply-author" name="author" required><label for="reply-text">Comment:</label><textarea id="reply-text" name="comment" rows="1" required></textarea><button onclick="Writereply()" type="submit">Reply</button></form></div><hr><div>replys:</div><div id="reply-container">'+replys+'</div></div></div><br>'
                        targetElement.insertAdjacentHTML("afterbegin", Display)
                    }
                    console.log("loadPastComments ran")
                })
            
        }
        function parseObject(){
                var obj = {
                    "Comments": [
                        {
                            "ID": 1,
                            "User": "Jacob",
                            "Timecode": "1/12/25 1:12pm",
                            "Text": "This is a a test comment. [1]",
                            "Replys": [
                                {
                                    "ID": 3,
                                    "User": "Jacob",
                                    "Timecode": "1/15/25 12:00pm",
                                    "Text": "This is a a test comment. [1]"
                                }
                            ]
                        },
                        {
                            "ID": 2,
                            "User": "Jacob",
                            "Timecode": "1/12/25 1:50pm",
                            "Text": "This is a a test comment. [2]",
                            "Replys": []
                        }
                    ]
                }
            for (var key in obj) {
                if (obj.hasOwnProperty(key)) {
                    var item = obj[key];
                    if(typeof item == 'string'){
                        console.log(key + ' -> ' + obj[key]);
                    }
                    else if(typeof item == 'object'){
                        console.log(key + ' -> ' + obj[key]);
                        var x = JSON.stringify(obj[key])
                        var y = JSON.parse(x)
                        console.log(key + ' -> ' + x);
                        console.log(key + ' -> ' + y.ID);
                    }
                    else{
                        console.log(key + ' -> ');
                        parseObject(item);
                    }
                }
            }
        }
    </script>
</head>
<div class="main-nav">
    <div class="nav-left">
        <div class="logo">
            <a href="/OnlyMats"  aria-label="Only Mats logo, goes back to homepage">
                <img src="/OnlyMats/Ref/IMG/logo.png" class="logo-img" alt="Matt's asshole with various text on it">
            </a>
            <div class="nav-link-container">
                <a class="Nav-Link" href="/OnlyMats/Pages/AssPics" data-link-cat="AssPics">Ass Pics</a>
                <a class="Nav-Link" href="/OnlyMats/Pages/Store" data-link-cat="Store">Store</a>
                <a class="Nav-Link" href="/OnlyMats/Pages/About" data-link-cat="About">About Me</a>
                <a class="Nav-Link" href="/OnlyMats/Pages/Blog" data-link-cat="blog">Blog</a>
                <a class="Nav-Link" href="/OnlyMats/Pages/OtherBoys" data-link-cat="OtherBoys">Other Boys</a>
            </div>
        </div>
    </div>
    <div class="nav-right">
            <div class="SearchContainer">
                <input class="inputField" id="itemSearch" placeholder="What ya lookin' for?" type="text">
                <button id="searchBtn">Search</button>
            </div>
        </div>
    <h1 class="PageTitle" id="ColorText">Only Mat's Blog</h1>
    <!-- Change .PageTitle, #ColorText color every 1 second-->
    <script> 
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function changeTextColor() {
            const textElement = document.getElementById('ColorText'); // Get the element by its ID
            if (textElement) { // Check if the element exists
                textElement.style.color = getRandomColor();
            }
        }

        // Call the function initially and then repeatedly every 2 seconds (2000 milliseconds)
        changeTextColor(); // Initial color change
        setInterval(changeTextColor, 1000); // Change color every 2 seconds
    </script>
</div>

<div onload="loadPastComments()" class="Body">
    
    <div>
        <div id="comment-section">
            <h1>Comments</h1>
            <div id="comments-list">
                <!-- Comments will be dynamically loaded here -->
            </div>
            <form id="comment-form">
                <label for="comment-author">Name:</label>
                <input type="text" id="comment-author" name="author" required>
                <label for="comment-text">Comment:</label>
                <textarea id="comment-text" name="comment" rows="4" required></textarea>
                <button onclick="WriteComment()" type="submit">Submit Comment</button>
            </form>
            <br>
            <hr>
        </div>
        <div id="MainCommentContainer">
            <div id="commentContainer">
                <div id="CommentInfoContainer">
                    <div id="CommentName">Jacob</div>
                    <div id="CommentTime">1/12/25 1:25pm</div>
                </div>
                <br>
                <hr>
                <div id="CommentContentContainer">
                    <div id="CommentContents">This is a test comment</div>
                </div>
                <div id="CommentIDContainer">
                    <div id="CommentID">ID : 1</div>
                </div>
                <hr>
                <div id="CommentReplyButtonContainer">
                    <form id="reply-form">
                        <div>Reply?</div>
                        <label for="reply-author">Name:</label>
                        <input type="text" id="reply-author" name="author" required>
                        <label for="reply-text">Comment:</label>
                        <textarea id="reply-text" name="comment" rows="1" required></textarea>
                        <button onclick="Writereply()" type="submit">Reply</button>
                    </form>
                </div>
                <hr>
                <div>replys:</div>
                <div id="reply-container">
                    <br>
                    <div id="MainReplyContainer">
                        <div id="ReplyContainer">
                            <div id="ReplyInfoContainer">
                                <div id="CommentName">'+User+'</div>
                                <div id="CommentTime">'+Timecode+'</div>
                            </div>
                            <br>
                            <hr>
                            <div id="ReplyContentContainer">
                                <div id="CommentContents">'+Text+'</div>
                            </div>
                            <div id="CommentIDContainer">
                                <div id="CommentID">ID : '+ID+'</div>
                            </div>
                            <hr>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</html>